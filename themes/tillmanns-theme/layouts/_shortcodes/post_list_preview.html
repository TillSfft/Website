<div class="post-grid">
  {{ $section := .Page.Section }}

  {{ range (where .Site.RegularPages "Section" $section) }}
    {{ $page := . }}
    {{ $poster := $page.Resources.GetMatch "media/poster*" }}

    {{ with $poster }}
      <a class="post-card" href="{{ $page.RelPermalink }}">

        {{ if eq .MediaType.SubType "svg" }}
          <img
            src="{{ .RelPermalink }}"
            alt="{{ $page.Title }} poster"
            loading="lazy"
            class="media"
          >
        {{ else }}
          {{ with .Resize (printf "%dx%d webp 60" .Width .Height) }}
            <img
              src="{{ .RelPermalink }}"
              alt="{{ $page.Title }} poster"
              loading="lazy"
              class="media"
            >
          {{ end }}
        {{ end }}

      </a>
    {{ end }}

  {{ end }}
</div>
